{
  "info": {
    "name": "Nano Banana AI图片生成系统 API",
    "description": "基于OpenRouter API的图片生成管理系统",
    "version": "1.0.0",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080/api/v1",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "系统检查",
      "item": [
        {
          "name": "健康检查",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/health",
                  "host": ["{{baseUrl}}"],
                  "path": ["health"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "body": "{\n  \"status\": \"ok\",\n  \"time\": \"2025-01-01T12:00:00Z\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "提示词管理",
      "item": [
        {
          "name": "创建提示词",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"梦幻森林\",\n  \"content\": \"一片神秘的梦幻森林，阳光透过茂密的树叶洒下来，地面上有发光的蘑菇，远处有小精灵在飞舞，整体色调偏蓝紫色，充满魔法的氛围\",\n  \"category\": \"风景\",\n  \"tags\": [\"梦幻\", \"森林\", \"魔法\", \"精灵\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/prompts",
              "host": ["{{baseUrl}}"],
              "path": ["prompts"]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"title\": \"梦幻森林\",\n  \"content\": \"一片神秘的梦幻森林，阳光透过茂密的树叶洒下来，地面上有发光的蘑菇，远处有小精灵在飞舞，整体色调偏蓝紫色，充满魔法的氛围\",\n  \"category\": \"风景\",\n  \"tags\": [\"梦幻\", \"森林\", \"魔法\", \"精灵\"]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/prompts",
                  "host": ["{{baseUrl}}"],
                  "path": ["prompts"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"提示词创建成功\",\n  \"data\": {\n    \"id\": \"65f7a8c123456789abcdef01\",\n    \"title\": \"梦幻森林\",\n    \"content\": \"一片神秘的梦幻森林，阳光透过茂密的树叶洒下来，地面上有发光的蘑菇，远处有小精灵在飞舞，整体色调偏蓝紫色，充满魔法的氛围\",\n    \"category\": \"风景\",\n    \"tags\": [\"梦幻\", \"森林\", \"魔法\", \"精灵\"],\n    \"is_favorite\": false,\n    \"usage_count\": 0,\n    \"created_at\": \"2025-01-01T12:00:00Z\",\n    \"updated_at\": \"2025-01-01T12:00:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "获取提示词列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/prompts?page=1&page_size=20&keyword=森林&category=风景",
              "host": ["{{baseUrl}}"],
              "path": ["prompts"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "page_size",
                  "value": "20"
                },
                {
                  "key": "keyword",
                  "value": "森林"
                },
                {
                  "key": "category",
                  "value": "风景"
                }
              ]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/prompts?page=1&page_size=20",
                  "host": ["{{baseUrl}}"],
                  "path": ["prompts"],
                  "query": [
                    {
                      "key": "page",
                      "value": "1"
                    },
                    {
                      "key": "page_size",
                      "value": "20"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"获取提示词列表成功\",\n  \"data\": {\n    \"prompts\": [\n      {\n        \"id\": \"65f7a8c123456789abcdef01\",\n        \"title\": \"梦幻森林\",\n        \"content\": \"一片神秘的梦幻森林，阳光透过茂密的树叶洒下来...\",\n        \"category\": \"风景\",\n        \"tags\": [\"梦幻\", \"森林\", \"魔法\", \"精灵\"],\n        \"is_favorite\": false,\n        \"usage_count\": 0,\n        \"created_at\": \"2025-01-01T12:00:00Z\",\n        \"updated_at\": \"2025-01-01T12:00:00Z\"\n      }\n    ],\n    \"total\": 1,\n    \"page\": 1,\n    \"page_size\": 20,\n    \"total_pages\": 1\n  }\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "图片生成",
      "item": [
        {
          "name": "文本生成图片",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"一只可爱的橙色小猫坐在窗台上，阳光透过窗户洒在它身上，背景是温暖的室内环境，高清摄影风格\",\n  \"count\": 1,\n  \"params\": {\n    \"size\": \"1024x1024\",\n    \"quality\": \"standard\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/generate/text2img",
              "host": ["{{baseUrl}}"],
              "path": ["generate", "text2img"]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"prompt\": \"一只可爱的橙色小猫坐在窗台上，阳光透过窗户洒在它身上，背景是温暖的室内环境，高清摄影风格\",\n  \"count\": 1,\n  \"params\": {\n    \"size\": \"1024x1024\",\n    \"quality\": \"standard\"\n  }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/generate/text2img",
                  "host": ["{{baseUrl}}"],
                  "path": ["generate", "text2img"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"图片生成成功\",\n  \"data\": [\n    {\n      \"id\": \"65f7a8c123456789abcdef02\",\n      \"prompt_text\": \"一只可爱的橙色小猫坐在窗台上，阳光透过窗户洒在它身上，背景是温暖的室内环境，高清摄影风格\",\n      \"image_url\": \"./data/images/generated/generated_20250101_120000_abcdef02.png\",\n      \"thumbnail_url\": \"./data/images/thumbnails/thumb_generated_20250101_120000_abcdef02.png\",\n      \"generation_params\": {\n        \"model\": \"google/gemini-2.5-flash-image-preview:free\",\n        \"size\": \"1024x1024\",\n        \"quality\": \"standard\"\n      },\n      \"status\": \"completed\",\n      \"generation_time\": 3.2,\n      \"is_img2img\": false,\n      \"created_at\": \"2025-01-01T12:00:00Z\"\n    }\n  ]\n}"
            }
          ]
        },
        {
          "name": "图生图",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"prompt\": \"将这只猫变成一只可爱的小狗，保持相同的姿势和背景\",\n  \"source_image\": \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgICAgMCAgIDAwMDBAYEBAQEBAgGBgUGCQgKCgkICQkKDA8MCgsOCwkJDRENDg8QEBEQCgwSExIQEw8QEBD/wAALCAABAAEBAREA/8QAFQABAQAAAAAAAAAAAAAAAAAAAAv/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAX/xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwCdABmX/9k=\",\n  \"count\": 1,\n  \"params\": {\n    \"size\": \"1024x1024\",\n    \"quality\": \"standard\",\n    \"strength\": 0.7\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/generate/img2img",
              "host": ["{{baseUrl}}"],
              "path": ["generate", "img2img"]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"prompt\": \"将这只猫变成一只可爱的小狗，保持相同的姿势和背景\",\n  \"source_image\": \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD...\",\n  \"count\": 1,\n  \"params\": {\n    \"size\": \"1024x1024\",\n    \"quality\": \"standard\",\n    \"strength\": 0.7\n  }\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/generate/img2img",
                  "host": ["{{baseUrl}}"],
                  "path": ["generate", "img2img"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"图片生成成功\",\n  \"data\": [\n    {\n      \"id\": \"65f7a8c123456789abcdef03\",\n      \"prompt_text\": \"将这只猫变成一只可爱的小狗，保持相同的姿势和背景\",\n      \"image_url\": \"./data/images/generated/generated_20250101_120030_abcdef03.png\",\n      \"thumbnail_url\": \"./data/images/thumbnails/thumb_generated_20250101_120030_abcdef03.png\",\n      \"generation_params\": {\n        \"model\": \"google/gemini-2.5-flash-image-preview:free\",\n        \"size\": \"1024x1024\",\n        \"quality\": \"standard\",\n        \"strength\": 0.7\n      },\n      \"status\": \"completed\",\n      \"generation_time\": 4.1,\n      \"is_img2img\": true,\n      \"created_at\": \"2025-01-01T12:00:30Z\"\n    }\n  ]\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "生成记录管理",
      "item": [
        {
          "name": "获取生成记录列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/generations?page=1&page_size=20&status=completed&prompt=小猫",
              "host": ["{{baseUrl}}"],
              "path": ["generations"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "page_size",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "completed"
                },
                {
                  "key": "prompt",
                  "value": "小猫"
                }
              ]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/generations?page=1&page_size=20",
                  "host": ["{{baseUrl}}"],
                  "path": ["generations"],
                  "query": [
                    {
                      "key": "page",
                      "value": "1"
                    },
                    {
                      "key": "page_size",
                      "value": "20"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"获取生成记录成功\",\n  \"data\": {\n    \"generations\": [\n      {\n        \"id\": \"65f7a8c123456789abcdef02\",\n        \"prompt_text\": \"一只可爱的橙色小猫坐在窗台上，阳光透过窗户洒在它身上，背景是温暖的室内环境，高清摄影风格\",\n        \"image_url\": \"./data/images/generated/generated_20250101_120000_abcdef02.png\",\n        \"thumbnail_url\": \"./data/images/thumbnails/thumb_generated_20250101_120000_abcdef02.png\",\n        \"generation_params\": {\n          \"model\": \"google/gemini-2.5-flash-image-preview:free\",\n          \"size\": \"1024x1024\",\n          \"quality\": \"standard\"\n        },\n        \"status\": \"completed\",\n        \"generation_time\": 3.2,\n        \"is_img2img\": false,\n        \"created_at\": \"2025-01-01T12:00:00Z\"\n      }\n    ],\n    \"total\": 1,\n    \"page\": 1,\n    \"page_size\": 20,\n    \"total_pages\": 1\n  }\n}"
            }
          ]
        },
        {
          "name": "获取生成记录详情",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/generations/65f7a8c123456789abcdef02",
              "host": ["{{baseUrl}}"],
              "path": ["generations", "65f7a8c123456789abcdef02"]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/generations/65f7a8c123456789abcdef02",
                  "host": ["{{baseUrl}}"],
                  "path": ["generations", "65f7a8c123456789abcdef02"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"获取生成记录成功\",\n  \"data\": {\n    \"id\": \"65f7a8c123456789abcdef02\",\n    \"prompt_text\": \"一只可爱的橙色小猫坐在窗台上，阳光透过窗户洒在它身上，背景是温暖的室内环境，高清摄影风格\",\n    \"image_url\": \"./data/images/generated/generated_20250101_120000_abcdef02.png\",\n    \"thumbnail_url\": \"./data/images/thumbnails/thumb_generated_20250101_120000_abcdef02.png\",\n    \"generation_params\": {\n      \"model\": \"google/gemini-2.5-flash-image-preview:free\",\n      \"size\": \"1024x1024\",\n      \"quality\": \"standard\"\n    },\n    \"status\": \"completed\",\n    \"generation_time\": 3.2,\n    \"is_img2img\": false,\n    \"created_at\": \"2025-01-01T12:00:00Z\"\n  }\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "批量任务管理",
      "item": [
        {
          "name": "创建批量任务",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"动物主题批量生成\",\n  \"prompts\": [\n    {\n      \"prompt_text\": \"一只可爱的小猫\",\n      \"count\": 3\n    },\n    {\n      \"prompt_text\": \"一只活泼的小狗\",\n      \"count\": 2\n    },\n    {\n      \"prompt_text\": \"一只优雅的天鹅\",\n      \"count\": 1\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/batch",
              "host": ["{{baseUrl}}"],
              "path": ["batch"]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"动物主题批量生成\",\n  \"prompts\": [\n    {\n      \"prompt_text\": \"一只可爱的小猫\",\n      \"count\": 3\n    },\n    {\n      \"prompt_text\": \"一只活泼的小狗\",\n      \"count\": 2\n    }\n  ]\n}"
                },
                "url": {
                  "raw": "{{baseUrl}}/batch",
                  "host": ["{{baseUrl}}"],
                  "path": ["batch"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"批量任务创建成功\",\n  \"data\": {\n    \"id\": \"65f7a8c123456789abcdef04\",\n    \"name\": \"动物主题批量生成\",\n    \"prompts\": [\n      {\n        \"prompt_text\": \"一只可爱的小猫\",\n        \"count\": 3,\n        \"completed\": 0,\n        \"failed\": 0\n      },\n      {\n        \"prompt_text\": \"一只活泼的小狗\",\n        \"count\": 2,\n        \"completed\": 0,\n        \"failed\": 0\n      },\n      {\n        \"prompt_text\": \"一只优雅的天鹅\",\n        \"count\": 1,\n        \"completed\": 0,\n        \"failed\": 0\n      }\n    ],\n    \"total_images\": 6,\n    \"completed_images\": 0,\n    \"failed_images\": 0,\n    \"status\": \"pending\",\n    \"created_at\": \"2025-01-01T12:00:00Z\"\n  }\n}"
            }
          ]
        },
        {
          "name": "获取批量任务状态",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/batch/65f7a8c123456789abcdef04/status",
              "host": ["{{baseUrl}}"],
              "path": ["batch", "65f7a8c123456789abcdef04", "status"]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/batch/65f7a8c123456789abcdef04/status",
                  "host": ["{{baseUrl}}"],
                  "path": ["batch", "65f7a8c123456789abcdef04", "status"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"获取任务状态成功\",\n  \"data\": {\n    \"job_id\": \"65f7a8c123456789abcdef04\",\n    \"status\": \"processing\",\n    \"total_images\": 6,\n    \"completed_images\": 2,\n    \"failed_images\": 0,\n    \"progress\": 33,\n    \"message\": \"正在处理第3张图片\",\n    \"updated_at\": \"2025-01-01T12:05:00Z\"\n  }\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "图片管理",
      "item": [
        {
          "name": "获取图片列表",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/images?page=1&page_size=20&prompt=小猫",
              "host": ["{{baseUrl}}"],
              "path": ["images"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "page_size",
                  "value": "20"
                },
                {
                  "key": "prompt",
                  "value": "小猫"
                }
              ]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/images?page=1&page_size=20",
                  "host": ["{{baseUrl}}"],
                  "path": ["images"],
                  "query": [
                    {
                      "key": "page",
                      "value": "1"
                    },
                    {
                      "key": "page_size",
                      "value": "20"
                    }
                  ]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [],
              "body": "{\n  \"success\": true,\n  \"message\": \"获取图片列表成功\",\n  \"data\": {\n    \"images\": [\n      {\n        \"id\": \"65f7a8c123456789abcdef05\",\n        \"filename\": \"generated_20250101_120000_abcdef02.png\",\n        \"original_filename\": \"generated_20250101_120000_abcdef02.png\",\n        \"file_path\": \"./data/images/generated/generated_20250101_120000_abcdef02.png\",\n        \"thumbnail_path\": \"./data/images/thumbnails/thumb_generated_20250101_120000_abcdef02.png\",\n        \"file_size\": 1024000,\n        \"width\": 1024,\n        \"height\": 1024,\n        \"format\": \"PNG\",\n        \"prompt_text\": \"一只可爱的橙色小猫坐在窗台上\",\n        \"is_img2img\": false,\n        \"created_at\": \"2025-01-01T12:00:00Z\"\n      }\n    ],\n    \"total\": 1,\n    \"page\": 1,\n    \"page_size\": 20,\n    \"total_pages\": 1\n  }\n}"
            }
          ]
        },
        {
          "name": "下载图片",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/images/65f7a8c123456789abcdef05/download",
              "host": ["{{baseUrl}}"],
              "path": ["images", "65f7a8c123456789abcdef05", "download"]
            }
          },
          "response": [
            {
              "name": "成功响应",
              "originalRequest": {
                "method": "GET",
                "header": [],
                "url": {
                  "raw": "{{baseUrl}}/images/65f7a8c123456789abcdef05/download",
                  "host": ["{{baseUrl}}"],
                  "path": ["images", "65f7a8c123456789abcdef05", "download"]
                }
              },
              "status": "OK",
              "code": 200,
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/octet-stream"
                },
                {
                  "key": "Content-Disposition",
                  "value": "attachment; filename=\"generated_20250101_120000_abcdef02.png\""
                }
              ],
              "body": "[Binary image data]"
            }
          ]
        }
      ]
    }
  ]
}