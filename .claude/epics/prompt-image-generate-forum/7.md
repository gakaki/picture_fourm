---
name: 用户认证系统
status: open
created: 2025-09-05T05:07:42Z
updated: 2025-09-05T05:23:33Z
github: https://github.com/gakaki/picture_fourm/issues/7
depends_on: [001]
parallel: false
conflicts_with: []
---

# Task: 用户认证系统

## 描述
实现用户注册、登录、JWT认证和Credits余额管理功能。包括用户模型设计、认证中间件、密码加密、token生成与验证、Credits初始化和查询。

## 验收标准
- [ ] 用户注册API完成（手机号/邮箱）
- [ ] 用户登录API完成（JWT token生成）
- [ ] JWT认证中间件实现
- [ ] Credits余额管理功能完成
- [ ] 密码使用bcrypt加密存储
- [ ] Token刷新机制实现

## 技术细节
- API端点：POST /api/v1/auth/register、POST /api/v1/auth/login、GET /api/v1/users/me
- JWT使用HS256算法，过期时间7天
- 新用户注册赠送30个免费Credits
- 使用Redis存储session信息
- 实现限流保护（每IP每分钟最多5次注册）

## 依赖
- [ ] 任务001完成（项目基础搭建）
- [ ] MongoDB用户集合已创建
- [ ] Redis服务可用

## 工作量估算
- 规模：M
- 工时：12小时
- 并行：false（依赖任务001）

## 完成标准
- [ ] 代码实现完成
- [ ] 单元测试编写完成
- [ ] API文档更新
- [ ] Postman测试集合创建
- [ ] 安全审查通过
